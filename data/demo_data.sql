/* Listes de taxons */
truncate table taxonomie.bib_listes restart identity cascade
;

insert into taxonomie.bib_listes(id_liste, nom_liste, desc_liste, picto, regne, group2_inpn)
values (1500, 'Oiseaux de mon jardin', '<h1>An eum discere ea mavis, quae cum plane perdidiceriti nihil sciat?</h1>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cum ageremus, inquit, vitae beatum et eundem supremum diem, scribebamus haec. Idem etiam dolorem saepe perpetiuntur, ne, si id non faciant, incidant in maiorem. </p>

<p><i>Nemo igitur esse beatus potest.</i> <code>Recte dicis;</code> Duo Reges: constructio interrete. <b>Cur deinde Metrodori liberos commendas?</b> <a href="http://loripsum.net/" target="_blank">Respondent extrema primis, media utrisque, omnia omnibus.</a> Quid ergo hoc loco intellegit honestum? <code>At ille pellit, qui permulcet sensum voluptate.</code> Innumerabilia dici possunt in hanc sententiam, sed non necesse est. </p>

<blockquote cite="http://loripsum.net">
	Quis nostrum dixerit, quos non pudet ea, quae Stoici aspera dicunt, mala dicere, melius esse turpiter aliquid facere cum voluptate quam honeste cum dolore?
</blockquote>


<pre>Elicerem ex te cogeremque, ut responderes, nisi vererer ne
Herculem ipsum ea, quae pro salute gentium summo labore
gessisset, voluptatis causa gessisse diceres.

Si autem id non concedatur, non continuo vita beata
tollitur.
</pre>


<p><b>Quis enim redargueret?</b> Idem iste, inquam, de voluptate quid sentit? Est igitur officium eius generis, quod nec in bonis ponatur nec in contrariis. Eam tum adesse, cum dolor omnis absit; <code>Et nemo nimium beatus est;</code> At negat Epicurus-hoc enim vestrum lumen estquemquam, qui honeste non vivat, iucunde posse vivere. </p>

<ul>
	<li>At ego quem huic anteponam non audeo dicere;</li>
	<li>Quibus rebus vita consentiens virtutibusque respondens recta et honesta et constans et naturae congruens existimari potest.</li>
	<li>Huius ego nunc auctoritatem sequens idem faciam.</li>
	<li>Consequatur summas voluptates non modo parvo, sed per me nihilo, si potest;</li>
</ul>


<dl>
	<dt><dfn>Pollicetur certe.</dfn></dt>
	<dd>Itaque eos id agere, ut a se dolores, morbos, debilitates repellant.</dd>
	<dt><dfn>Restatis igitur vos;</dfn></dt>
	<dd>Sin eam, quam Hieronymus, ne fecisset idem, ut voluptatem illam Aristippi in prima commendatione poneret.</dd>
	<dt><dfn>Eam stabilem appellas.</dfn></dt>
	<dd>Et si turpitudinem fugimus in statu et motu corporis, quid est cur pulchritudinem non sequamur?</dd>
	<dt><dfn>Tenent mordicus.</dfn></dt>
	<dd>Cur tantas regiones barbarorum pedibus obiit, tot maria transmisit?</dd>
</dl>


<ol>
	<li>Quid enim est a Chrysippo praetermissum in Stoicis?</li>
	<li>Ita multa dicunt, quae vix intellegam.</li>
	<li>Alterum significari idem, ut si diceretur, officia media omnia aut pleraque servantem vivere.</li>
	<li>Cupit enim dícere nihil posse ad beatam vitam deesse sapienti.</li>
</ol>', 'images/pictos/oiseau.gif', 'Animalia', 'Oiseaux')
;

insert into taxonomie.bib_listes(id_liste, nom_liste, desc_liste, picto, regne, group2_inpn)
values (55
       , 'Ces oiseaux colorés'
       , '<h1>Honesta oratio, Socratica, Platonis etiam.</h1>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. <a href="http://loripsum.net/" target="_blank">Erit enim mecum, si tecum erit.</a> Ergo ita: non posse honeste vivi, nisi honeste vivatur? Nam ante Aristippus, et ille melius. <b>Tum Triarius: Posthac quidem, inquit, audacius.</b> </p>

<pre>Iam ille sorites, quo nihil putatis esse vitiosius: quod
bonum sit, id esse optabile, quod optabile, id expetendum,
quod expetendum, id laudabile, deinde reliqui gradus.

Quasi vero, inquit, perpetua oratio rhetorum solum, non
etiam philosophorum sit.
</pre>


<blockquote cite="http://loripsum.net">
	Placet igitur tibi, Cato, cum res sumpseris non concessas, ex illis efficere, quod velis?
</blockquote>


<h2>Si id dicis, vicimus.</h2>

<p>Hoc mihi cum tuo fratre convenit. Neque solum ea communia, verum etiam paria esse dixerunt. Unum est sine dolore esse, alterum cum voluptate. <a href="http://loripsum.net/" target="_blank">Quid iudicant sensus?</a> Quis istud possit, inquit, negare? Nihilne te delectat umquam -video, quicum loquar-, te igitur, Torquate, ipsum per se nihil delectat? </p>

<ol>
	<li>Igitur ne dolorem quidem.</li>
	<li>Sine ea igitur iucunde negat posse se vivere?</li>
	<li>Coniunctio autem cum honestate vel voluptatis vel non dolendi id ipsum honestum, quod amplecti vult, id efficit turpe.</li>
</ol>


<ul>
	<li>Et hercule-fatendum est enim, quod sentio -mirabilis est apud illos contextus rerum.</li>
	<li>Sapiens autem semper beatus est et est aliquando in dolore;</li>
	<li>Illa videamus, quae a te de amicitia dicta sunt.</li>
	<li>Ita prorsus, inquam;</li>
</ul>


<dl>
	<dt><dfn>Quid enim?</dfn></dt>
	<dd>Haec igitur Epicuri non probo, inquam.</dd>
	<dt><dfn>Tenent mordicus.</dfn></dt>
	<dd>Sed utrum hortandus es nobis, Luci, inquit, an etiam tua sponte propensus es?</dd>
	<dt><dfn>Venit ad extremum;</dfn></dt>
	<dd>Itaque ab his ordiamur.</dd>
	<dt><dfn>Pollicetur certe.</dfn></dt>
	<dd>Ut in geometria, prima si dederis, danda sunt omnia.</dd>
	<dt><dfn>Si quae forte-possumus.</dfn></dt>
	<dd>Illum mallem levares, quo optimum atque humanissimum virum, Cn.</dd>
</dl>


<p>Duo Reges: constructio interrete. <a href="http://loripsum.net/" target="_blank">Utilitatis causa amicitia est quaesita.</a> Iubet igitur nos Pythius Apollo noscere nosmet ipsos. Haec quo modo conveniant, non sane intellego. Sed ad haec, nisi molestum est, habeo quae velim. Graece donan, Latine voluptatem vocant. Quia voluptatem hanc esse sentiunt omnes, quam sensus accipiens movetur et iucunditate quadam perfunditur. Itaque contra est, ac dicitis; Quid igitur dubitamus in tota eius natura quaerere quid sit effectum? </p>'
       , 'images/pictos/oiseau.gif'
       , 'Animalia'
       , 'Oiseaux')
;

insert into taxonomie.bib_listes(id_liste, nom_liste, desc_liste, picto, regne, group2_inpn)
values (56
       , 'Mammifères de mon jardin'
       , '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. <b>At, si voluptas esset bonum, desideraret.</b> Quos quidem tibi studiose et diligenter tractandos magnopere censeo. Utinam quidem dicerent alium alio beatiorem! Iam ruinas videres. Duo Reges: constructio interrete. An me, inquam, nisi te audire vellem, censes haec dicturum fuisse? Itaque quantum adiit periculum! ad honestatem enim illum omnem conatum suum referebat, non ad voluptatem. Quid me istud rogas? Idem adhuc; </p>

<p>Eadem nunc mea adversum te oratio est. Piso, familiaris noster, et alia multa et hoc loco Stoicos irridebat: Quid enim? Terram, mihi crede, ea lanx et maria deprimet. Hoc Hieronymus summum bonum esse dixit. </p>

<p><b>Confecta res esset.</b> Hoc est non modo cor non habere, sed ne palatum quidem. Haec bene dicuntur, nec ego repugno, sed inter sese ipsa pugnant. <a href="http://loripsum.net/" target="_blank">Age, inquies, ista parva sunt.</a> Quamquam in hac divisione rem ipsam prorsus probo, elegantiam desidero. <a href="http://loripsum.net/" target="_blank">At hoc in eo M.</a> Iis igitur est difficilius satis facere, qui se Latina scripta dicunt contemnere. <i>Ita graviter et severe voluptatem secrevit a bono.</i> </p>'
       , 'images/pictos/mammifere.gif'
       , 'Animalia'
       , 'Mammifères')
;

/* Listes des taxons */

truncate taxonomie.bib_noms
restart identity cascade
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (1, 3582, 3582, 'Guêpier d''Europe', 'dsfsdf')
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (2, 3590, 3590, 'Huppe fasciée', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (3, 61153, 61153, 'Écureuil roux', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (4, 60015, 60015, 'Hérisson d''Europe', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (5, 3571, 3571, 'Martin-pêcheur d''Europe', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (6, 3760, 534742, 'Mésange bleue', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (7, 3764, 3764, 'Mésange charbonnière', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (8, 4117, 4117, 'Merle noir', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (9, 4001, 4001, 'Rougegorge familier', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (10, 4035, 4035, 'Rougequeue noir', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (11, 4040, 4040, 'Rougequeue à front blanc', null)
;

insert into taxonomie.bib_noms(id_nom, cd_nom, cd_ref, nom_francais, comments)
values (12, 534742, 534742, 'Mésange bleue', null)
;

/* correspondances especes <> listes */
truncate table taxonomie.cor_nom_liste
restart identity cascade
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (55, 1)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (55, 2)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (56, 3)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (56, 4)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (1500, 9)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (1500, 10)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (1500, 11)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (1500, 12)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (1500, 7)
;

insert into taxonomie.cor_nom_liste(id_liste, id_nom)
values (1500, 8)
;

/* Users (pwd = username) */
truncate table gnc_core.t_users
restart identity cascade
;


insert into gnc_core.t_users(id_user
                            , name
                            , surname
                            , username
                            , password
                            , email
                            , phone
                            , organism
                            , admin
                            , timestamp_create)
values (1
       , 'user'
       , '1'
       , 'user1'
       , '$pbkdf2-sha256$29000$4/w/Z2wt5by31rq39r73fg$SNetk3yBXp8T0CH2K4/Ye04RnqCcn410KcxIUlqUeJo'
       , 'user1@tld.com'
       , null
       , null
       , false
       , now())
     , (2
       , 'user'
       , '3'
       , 'user3'
       , '$pbkdf2-sha256$29000$zlnL2XvvXUsJIWRMSek9Bw$DN2qj12jBDy/l.btaJP0pHjWuT0az2fgGufKjjqOLEs'
       , 'user3@tld.com'
       , null
       , null
       , false
       , now())
     , (3
       , 'user'
       , '2'
       , 'user2'
       , '$pbkdf2-sha256$29000$qjWGcE5prfX.H6MUgjAGYA$796GxjUwZYdQc7rDVeL0fOP3NjOrYfBaKZMGX0FFdRo'
       , 'user2@tld.com'
       , null
       , null
       , false
       , now())
     , (4
       , 'ad'
       , 'min'
       , 'admin'
       , '$pbkdf2-sha256$29000$wvhfa631XquVkjKmtBYCIA$mCSoZmxwpUAMdokfSy/cdUgy0OQ1XSBH3jfVoGQwBuI'
       , 'admin@tld.com'
       , null
       , null
       , true
       , now())
;

/* Modules */
truncate table gnc_core.t_modules
restart identity cascade
;

insert into gnc_core.t_modules(id_module, name, label, "desc", icon, timestamp_create)
values (1, 'observations', 'Observez la faune', 'Observation de faune diverse et variée', null, now())
;


/* Programs */

truncate table gnc_core.t_programs
restart identity cascade
;

insert into gnc_core.t_programs(id_program
                               , title
                               , short_desc
                               , long_desc
                               , image
                               , logo
                               , module
                               , taxonomy_list
                               , geom
                               , timestamp_create)
values (1
       , 'Mon premier programme'
       , 'Premier programme de GeoNature-citizen'
       , '<h1> Long Description</h1> <p>jkll kjlk jlkj lkj lkjl j</p>'
       , null
       , null
       , 1
       , 55
       , '0106000020E610000001000000010300000001000000000100001072D471EACC13405340C03EFF844640CD78E849EECC1340ECF42040C0854640253972F4FBCE1340FC501BEE05864640D9A86136F2CA1340109CCD06618646408FF3889A61CC1340C20B8845C48646407E14514CD7C8134064338C33B7864640C9171BF3D8C41340A92B36F9238746402D16EF8447C3134072C94B07C2884640E52C0A4CF8BB134052AC09B1EA8846403C57828C04C01340BC7DB1A66B8A4640872D083516BE13400892A33B348B4640349FE624AABF13400B83FA06F78B4640D17858A389C91340D5BB0F87D18C4640EFA98DE1ADCF1340B329F749F78D464066639E40B4D513406B32294C878D46408FAF07E3B5D71340A92FDF2ADB8D46409E3AA5831BE213407019E8D6C68D4640EBD90DCA70F01340947A33AC1C8D4640B3EFD76141F91340E0FA2B7F328D4640A32CC5AC0AFE134007E76A8E7E8D4640BEE94A47F2001440C74BA3A3678D4640D5271A64A8041440D0694F7BE78C4640FCC761D542071440941B9412668D4640B664568C78121440C9119872558E46407236BBF1C91F1440BCC23E81CD8E4640D067333C7D2514403E6835FFC88E464028F78787752E1440D94E0CA8EC8F46404F36BE36323014400201FAA1D98F46409FD880A02F391440673F800262904640856B1E72E340144017FD9B2A6F9046404DBFA44D58461440B5632ED6C69046401AB022016C4B1440512D0430C5914640B4267032EB51144062D7A56D46924640B350F46DBB4F14401F0C81DAAD9246403B2BDA593F481440DD80FF5BC1924640A16B1551504714403E95BC791F93464092A98773B43D1440C19DB201169446408AAAB6ACCF381440135E2E2F4A9446400C6FD7DC02351440FCD73255DE9346403DA36464B5301440EA9165110B94464018570980612D144088B1AE170E954640E5D09E4ADF291440979D38DD45954640C5DD6508EB2C1440C0369BA92B97464034939504863214404A14D301579746408E795B364034144015F7C3DB94974640334EA264F73814405E8E6AD64B974640227E743C69421440923CEEEE4D974640C258F44FF8451440ABF70052EA9746404372C315924B14403EE779793D984640269967FE814D14405D17164A0D99464088CF3D0F6C3B144031FC136E3A9A46407AF05F501E3A1440D7464443C39A4640F20BD63D92301440CDA5273A2D9B4640933C73D1832B144023CB5C4EC79B4640C61026A1242E14403BE65A2ED79B46408B05A00E833114408ED3E820789C46408080137397331440F336B8F9539D46409D240C23A2381440578841958F9D4640076841A6793A1440430DD5AFF69D46400A342428CF461440E19343074F9E464049EEA7EE734C1440487752093C9E46400717B254F954144009FB28164E9D464000294F6C0D5A1440AAC0E0C0E99B46406E82D6C32B5F1440A7A5F3C8239C4640A2ACB8489B5F14409C74B270A29C4640F1E7BF499B671440A5F99EBE109D4640723D48043468144061ECDE4FF69D464032C8D8086A6F1440A44AD7438A9E46406AAEA1B3916F1440D2E6231BCB9E46400B5B2865847A1440FA6E90341E9F4640A2AE6A70EC7D1440F0BD57E67F9F4640646968E1AB821440EFF0AA979C9F4640241659529A8614400870D64F259F4640E62ED4F4E28B14409BB8B4784D9F464031D567BDC290144082D4F35F1A9F4640CE4BA7C4099114400066D089AA9F4640AA243BBB4594144013616DEBBC9F464083D2CAD5C69C1440E0667D9DCEA04640503722C49E9F1440F50F71AA95A0464089CF13E348A41440EE1B606DA2A04640AC87CD565EA01440F1251D1722A04640DA08A42A72A0144076EF6780AA9F4640763EDE22E3A414408BED69CB809F46408638B421C7B41440A89361A3CB9F464096FAB74A2DBB1440CE2FA40AEC9E46408A723F8D01BD144004A2E0C0979D464080E71FC7B5C21440186E495E029D46401F83A0EB69C3144062D23954AC9C4640C3D36A3C03CD1440DDC796B3319C4640503E03E78DCE14407EAF98C0D39B464025345DA7BBBB1440EE9D919FDC9B46407A9F723B21B61440A822FEDDB89B4640FCB0C9E26EAB1440CE033BB2E59A46408A9343B957AC144092F863C1AC9A46404CC5099DADA81440C3C3A62CAC994640D6217AFD90AA1440DEC8483BA999464011971ECA29A81440A35780FE50994640876432B4CFAC1440E911DC8E6999464067D5057CB2B314407F0A1A1E2597464095FF171D2AC2144064AA018DD39546407089E9C3A4BF1440ED83D98F6595464049470CBFD2C21440FB17EEB9D99446402925D8244DC4144059CFFE3FC9934640908ABBBD5AC21440EC6746137B9346406ED3BDD197B91440CB3371EE0E934640250934EF2CC014407F74C7C299924640902FED039AC01440FFEB4BFD2B924640979B249695C31440F2971CA8EA9146400CD7475204BF1440D630F1DF459146408F7061D304C11440BF7FADBA37904640639E07C8EFBF14403EDE2A60778F4640102439A18BBB14402B5D40090C8F464040E4BFAE02B11440F750B057428D4640E3BB43C3CDA61440FF2F9C5F998C46404EBE877199A114404E5FACF46E8B46400B2C3C6D21A2144099823CD1CA8A4640FE8AC110979E1440192F281F348A4640C715922453941440969D35966F8A4640A5346E8E5C90144092C379B9C78946404BB71596E68C1440BCBDF2C56C8A4640EB8BB8A6C5891440FA7140F88E894640C01A906E5D8E14405021FBCE4B8946401EC9045D209814408733A3E5D78946406B2157A8789814400C4796848689464099F4A5AE8DA014402FF1CA5F6C884640DEA90E418BA614403E118886648846409B9ACF9067AE1440034826F3B988464064B08EFD26B11440AA467A2FC78946405EA9989CB0B71440215DC7E8A98A4640DC129A92BCBB1440DCD73263DD8A464052131D7C33C61440EE9E4B25B08A4640349CFBDD33D51440A240BDB8C78A4640B510F8DD8CE714407A1D988E228A46401AC5044CF4E8144009483533E28946401F130A8A12E71440071D4535698946400779E10B48F1144090D9BF1A91884640AADBFC56D9F21440D7BE38B5A18646405581112ED5EB144032CEFE93B4844640402CC0F71DEC1440A037020C998346408525606C68E314400F5E181422804640BECE89C55CE81440E9E33CC103804640127A6EE956E81440E1E7A8892A7F46405278ACDD02E5144080986196197E4640625E861CF0D514401D2E7CD84B7C46401BA24FC0A3D314400D15971CE67A46400335F1E934C714404BE12EE15D78464043DC146852BF144096B75A89C7754640B0EBCB5CC1B7144008DE5A4953754640A53D7E59BBAC14409AA0DE8CB1754640EAB3FEE2FAA3144052FC7F298F7546409DB085C3A2991440CB3D3E18A2744640E89910186F9514403BCD8CB0D6734640E94D60D423981440AADC3C6644734640F13E499FB09B144065DEBB8809734640E6B81977919A1440BB4A28C382724640A318F2A9249214402CAD2FF7FC714640731A8ABF728814401FC01C381072464020C2B1FE2B8B1440BA196AFDC2714640102CB1844C9514402598D885F4714640EF6F4C9A1DA514405C6EB33B947146400132FAE14A9D1440FEB214317070464012DB26040D9A144061BE7A62626F464095A37DC426951440F8D53A98ED6E4640EB7A4397459514404C9B03F1AA6D4640B54D3CAE3690144086EFF3B2EB6B4640FB8859105D8C144049CD180D5E6B4640169719E47D8A14405533FCBC5E6A4640344483BFA96B1440E4B63DAEBC69464019769F2199681440AACAF54BCD6946402097CDEC5A64144036E61DF7426A4640EA9383CBF45A1440D8456B3C6D6A4640B8B3BD7C5950144053FEAA57476A46409FAEFE9A3A4B144074A6AD22736A464087AB5D5BA54D14408FA5BC4AE066464058CC7F501E48144045E33657706546403A4CBEBDD3331440CC6F76478A65464004FD051C3E2A1440568D0734356646405E0AC99CC311144082FE16BF40674640A053C20E5D0D1440CAFE38DBA0674640D20D3C45F10B1440B300357C27654640B8860D69160714409AE6317EFA644640DA21D88861001440ED7608DBFB634640720147D165F8134048288B347664464059DF91F6EBEF134022064EADBF6346407CA7366303E61340FA626E908D6346400B226170D4E01340ED79E5F1B8634640D74C525BCBD613400CD8EB1E59634640F6825610A8CF13405A50A25AC6624640513A71AC07C913407549D1A39363464039CA719A99D21340CECC448206654640451B462204D813401D5D7AFB7F6546409875AEDA47CF1340DD560FAC27674640C255206784D11340B4D60CAF9A67464063F67958EAD0134089D6AC71186846400D55340144CF13406B05C1BED8674640727D31F1FFCA1340190B03F664684640D8E64905A3C4134092AFE39EB7684640B90CF89B9BBB1340FB1F6585C5684640A4864AF7CFB11340DA4BD15E4C684640DB9775BD00B1134027BB99EB6A684640F49C4AD31F9C1340FE869576DE674640593182B738961340CD23AF158B664640B22B66965F92134021C7CA1CE06646403B4202E7708F13401B2F251FCF664640EA7EFBDEE88813408902DA32926746402C7C7E6A0F8913400150D25DCB6746406EA1770B10831340FEAB175CD8674640DE103438B07D134024DFD9D43D68464096F96CD8F1781340F3FD5D891C694640AB9E0ED5A2721340D29E5CADA76946408545C98ACE6C134055DAA8E28D6746402BEB8D586667134068282830A267464078ACC2A7106713408FF347823F674640E12DFC70D6541340DD2BC14916684640CE3F55B6164F134072CD4F34C06746401678C237164A1340A04B7604B26746407021ABF3C3461340878B5E52E06746404C59369E3634134035C28E7E2A674640406B0B864032134069950885CD674640CB8791120B331340743AC3350F684640BBC9A081CB371340F568C675FF674640A27C1EB2073E13400006D6F776684640043BB8E11D41134065F3116760684640E4667CDE404A1340F26CA15596684640FF901A4E97471340C7FB6EBAA96A464040B2B0AF8D481340DB773AD2396B4640E5BD12891B4E1340437DBA118D6B46401DBDFB862C5C134026700BB8C26B4640AEC33768A4601340D6D751284A6C4640900FD37D0A61134073AEC848DB6D46401FEDBCBFEA71134072346BC5FC6F4640CAEE4AE345711340FE8B78EFBC704640515E32733F6B1340FA3A5B05E47146406676C5509F6B13408F6B596C3573464032C4CABCAE79134081DB30917474464017421CB1C37E13402C74BEAB09764640A03EBF10DE8B134086715C33E4774640E64A5B59B3801340F5B59C47447A4640CEA15073D07013408ADB8561A17B4640E2AF967FA5691340A2924141437D46403D5E3E07F76B1340E9DFA51D3C7D46400F290AC23A6F134072EC279AD57D4640AFB293193A751340C2EE702C407E4640070F9E0E0A7E13404F1779A9B67F46406F846A24BD8713405683952ED27F464024B9F0397C8C13400448D9A7BE8046403154B19B219F134045CB3AF4E68046405C37C64860A31340BCDD0A40E181464064B2EAC093A61340BDF77951148246402308A079F0B413404847E358BA814640122D7FB0B7C11340AB3D7EE33B82464090D8FEADA3C81340E76C4D550B8346406EEA1F3139BD1340E8E81C7C6D83464095F9314B9ABA13403959152E1C84464031E49A0DB0BE1340FCD8D55D7D8446401072D471EACC13405340C03EFF844640' :: geometry
       , now())
     , (2
       , 'Mares de la Métro'
       , 'Inventaire des mares de la Métro de Grenoble'
       , '<h1> Long Description</h1> <p>jkll kjlk jlkj lkj lkjl j</p>'
       , null
       , null
       , 1
       , 1500
       , '0106000020E610000001000000010300000001000000E300000068E9047F189B1640BBD95D006A9846400A0A6BE5439A164066DE6052B2994640F4621A26E3911640F44A0B800A9946409EAC000CA58C1640D166631EE0984640AD33D67F55881640B29898496A9946401E2741D163841640D711423C569946408544B3CB9A8B16400228F358069A464080E0AA50F1851640E14999394E9A46409D999F7EB684164005E590C3A49A4640C230F41A19841640C9BF9AC1659A4640BB233AF2F57E1640EA17C198C19A464079359AE7E07B1640DF8C0A38B79A4640D2003ECBAA7F16407834B642529C464037F397675E7D164074966AC4F89B4640679F6D116079164071E220F9139C4640D213741B6B741640EF1D6716939C464093B8636836701640CE2F15ED529C4640DEF2364EDC6F164023A831C6919C46406ED3C968BE68164013DC91791F9D4640FF93B4EA4A641640AE2325101B9E464064D43E1F0F5C16406600E0B25D9E4640375974FABE5616403AC9E9EB2D9F4640126C16EB124F164036709F40179F464036F94CC04A4C164087ADF1424D9F46405ED20D6A2748164002F746A5FA9F46402F16E83AAB4C16408AF04ED44FA146406FC761513149164027D82B7CBBA1464079C1AEB3B74B16402808465FF4A14640194BA12E2B511640395A8EDA08A24640CCD10E96E0561640F36A88D286A24640E18B931C08591640B5077004FBA246408B823A5FBA64164055A830A02DA4464057F5192D126616404165F03085A446400F3E9B38F0611640C04758FBCAA44640F3F33FEAB0691640640337B556A64640C8BBDBD470761640AFA07792A7A546407971EE4A3F7B1640BB1898D2D4A24640511A39822C891640AE8E95FDFEA04640C3DB66A41E8F16402B24C0B796A046401EF43AA6D6A316400B27985B36A1464072614B512FA5164089291950DDA14640CD56BF93DCAA164003DBC67799A246406AB20B48BDAC164044EBC76DAEA346409902892176AF16409F64F12EEEA3464083FC21B0B9B31640171F0163F9A3464063E455C4F6B8164016EDC8F471A446408D5B02438AC716405A1D13A661A64640D590902C03C9164000A2FDFC80A64640120F67018FCB1640ADFA3C7B5CA646404B8321DF2ECF164065E2328D02A74640028B95C392E016404532EEF804A84640992F79C2D1E71640E929AB9B42A946402D281C611EEB1640EF80F5EBC4A8464026E4D99561F516407CD31F8331A94640BE7D0190B9F91640A841873DD5A846404CE62B9D90FD16402D3A16AFF5A74640A6E73492DB011740DF13776EC5A746402AFF3760CB0117401DA9A80D83A74640983255C807FD1640C7842B1B3CA7464067B1431069F91640B5409EE013A6464036CD825A2B0117408CDEA5BF53A64640C5770F8EC50D17407D9D21D853A6464052F95DE4CC26174092231682CFA44640D14F5083E12D17400CCF4D4AFFA44640C168F254424217404E8CA0C283A44640571CB62E4B431740E017344B42A346400C2DDC6362411740C50F50F9DDA2464062BA64702F3617407975510DE4A146401C5F774C441D1740AAEC27FF079F46403AF372FFD62B17409AF09377449D4640778C3A22A42F1740106B97AE7D9C4640A687274DFF351740138AC275299C464080E19864DF361740A3317AFC8B9B4640963DAC8F383A17405A631E972C9B4640C122C15F1E3D1740F32109E3349B4640352D011A653D17408EF94194B19A46401DAE293E1D3F17407D74B30AA79A464016EF573705411740D4BA0D3DFA9A4640206702FE214117401FD65CC4B49A4640F5722643CA461740AB6BBB885D9A464007AC409A354817407FD36991009A4640CD3190F4B2531740720116635D9B46407BDE16EB975D1740AAB4F13D229C46407A1697A586621740387932C86C9B46400FA95B630B6617401882F4CB899B464085B5B2EF1069174010F5CE8B549B46401B6AC7A8E1641740664D1569E59A4640E69EAB9C4C70174052E502BC179A4640FB448695706917407241A43EF29946404C6EB1DF5B661740AC98107C5E9946403E7DBFE637641740C9F4C56E66994640A6CDC1DD876517409ABDA2742199464028211111A96217400947C15B349846405660DB40A25C17409FAA7FAB2E9746403456424C025F1740C4356D0CD5964640857F2D87055D1740F02BB92980964640DBD8A86E3C56174003A6F0B813964640F9493DD53F521740DE900D660E964640C881DC2CD9401740AC4BBE43DB9446404D4B29F9D537174088ACE1720C954640E0C19436D2341740D01BACFA9E94464000B2EDFB6835174016A4DC3834944640E133733493381740A0BBFA499C934640B8E3234E4A421740BDE289FEAC9246408D369EBA2D4117402E82AE9EBA91464007030A7587431740FA774BC072914640167A59F3B7451740FD14A6EC61914640E82E5B84FF4917403BF267A1E891464074AE6060ED5417400D5F3A9F2E9146402CF4C9B7E55B17408B07814D5F904640B7B35FA00F63174083583F2E7D904640810AE61E336A17408EBCE6DF49904640E81F02B6E17517408CCB8049488F46407F9CF50C1D8117402A255DBAA88F4640E95C9EFECA7D17404B915D7CD78E464028F49322137F1740A8217935308E46408696ED393B7C1740DF9A1B0A8C8D4640895B7880CE811740ABE7D709C18C4640139CCDF04C7E1740012039E0768C46409348A1A2D68017405B6EF53C148C46400CDC87619A831740E45F2FCD468C46404CB95284818517406E1E1C1D278C46409CAB0AE933851740A8E988A1B38B46407F5E0B9F76811740E3DC55A5A28B46409B47DCAD2381174097415AEC198B46409816468187731740FD7D85ACD88A4640220F397D5172174096CD980F778A4640BD12B6F15E74174026C8DB75E1894640C3717974A66A174058468F8DBF8846407C212BC6D16A17404B8EBD6A2488464029C9D8F3D46617407E84D209F987464011E84EC9315D174015CABB97DF864640E2FFBD61866E174088CB1DF3BD854640300D7295BE6817403A02E0F61085464090BD0B30EF5A17404A386A60DD84464062789E18DC541740C89D5D00338346406C786BC31B541740935E3C956F8246406D52A57DDB4A1740392EC163B8814640D2CA25DF7C3F1740245DF2BB5D834640341A1A66193917401EBC47C6C08346400142CE32A0351740EB5B157D8884464062F2DC124636174080FB3F92EA8446403A2F812667331740F765F08D51854640A6D67FFE251417405537800689844640DDDE13C5110E17403FCC1497518546405C3C5CC7360617400F549BAC10854640BA806FE131F21640EE8D77F54F864640AE5435B5E1FD16407BC6A94EE38446409CBFEAD170F8164058E412056B8446400824A090FFF216409901ED60C7824640F075B8B13BEF16408A06165B7F824640418AF36217EA1640116CD917C18246402BA5FBAE2FEE16406E8385C5F2814640206FE07158EC1640B4B7E430DD814640F76FF31CD1EA1640C5EEFFF93E814640A032751B61E61640515BFC9434814640184C4A5269E616400B987584DA8046401B216E9122DF164092D67032BC8046403F35ACB611DD16407E7613E6E67F4640B71AE95CD0D91640AA9AD0D4E37F464028B6CD5BA4D7164070D49F8D8D7F464071F04CA039C516402636172EF17F4640127DAC59E4C516400B9BD08C4180464024E4C814DCC316400AE7E7EC8C80464091694C9AE1BE1640D49559EECA8046401A01059B1EBB1640560E64209D8046409FD3B1376AB5164063032596C2804640AC2B7611D6B016408F89DE74448146402A97502EFEAC164037352CE61C8146409D732729E7AA1640CD2D51A939814640CE2BD84E04AA1640A8CB0B188781464038F77CC843A216403CE76DA0EF814640A4F34CC3CCA21640F45DCDAD1C824640B72E56CDDD9B164006557E7C2D824640EA7E15BDEC961640B354195A6C8146402A7BEB47689516407C4FB8338A804640E559E2B9B58F16401970116B6E7F4640885D02FD9A9116406A9B5910037E4640B16DE9C6348616400133BE5C5A7C464033381E3F8384164081613ED1C97B46402A600B22AD7F16403630F84DBF7B46401643F7388C791640F39651BE607B4640DA6DAA81BD7116402D84590A597B4640C592BC455A6B164063010436037B4640E125F2DB13661640FABFDA2F1E7B46408432A7DFD95F1640C9111675B97A4640C200C6D96F5A1640991EF509F27A46407599C41FDB501640F5D1A3E66F7A4640D4D6FAC55F491640781D58DE677A464028A03DD5FD461640AF29878E077B464026807677754C1640CAF7FFB90E7B464075CEEBD38A621640CDEBE9FF137D46405A4EA932A1691640FB996D93FF7D4640CF9195350E631640EA9BCE29AC7E464049209E705A4D1640B266C7D6FF7F464016798A87A74F16405AB9C4EC358046403B0BC8D9DD4E1640C6D657ED7880464095BDBAF4B35116406E09863A9580464030FBF38E49501640906976C0E78046407A5E40EADB511640C8C01D16808146403738CEA97853164074740C19C88146400DC570737C561640B2F1AF74D8814640E444E5AF505716409A81A26E8A824640AB07F7977B5E1640FB2B0792288446401FE86B507667164093A31ACF15884640F8E0266A746E16404CD75B8F2C894640B82D9F7D0E7216403C3578E3618A464095487EADEE7A1640760FE2567B8B4640829A919FE0781640369FCC9E648C4640E8227EA0E4791640FB1931E1E98C4640CB505615BF7E1640C8A08F82028E464077C23B917B831640DBC35F988E904640F31D329F1E8D1640D084F7082992464079A22F1C5C8F1640300C6E98FB924640019FACDC8C8D1640EB3575CF819346409542D57CAD921640550E2B599E9446402D7E9E0A11931640EFFE048F06954640BE78417F26911640015F22D34495464084108FD1729A164051D78D0210954640CDFB584E279D16405661DD425195464097B62FA5A0941640E6309EAB52964640554B2664B39816405E30E9078A9646409992ACE5C597164023836BE93897464072D411EEE7951640706A85624997464021695729829616404997F6AAE0974640DF6BF982EF9B164034F252AA0C98464068E9047F189B1640BBD95D006A984640' :: geometry
       , now())
     , (3
       , 'ABC de Chazeaux'
       , 'Inventaire participatif sur Chazeaux'
       , 'Inventaire participatif sur Chazeaux'
       , null
       , null
       , 1
       , 55
       , '0106000020E610000001000000010300000001000000100000004C9570A0561A1140099F004B8B4C4640DE0E7AFB0B2B114045783749844D464000B8E16880321140D07D20A86B4D46401ACC678BA23411408D42535A3B4D4640BCF25395DC381140123F4560564D46405D6EEA9C7C39114006144301054D46402F8E95C5E04211402C296B74A74C4640BE89A5928B4611401B4688BA6C4B46404D9D76B462451140C062DCD5394B46404C38D848EA3A11407ACD44A5654B464087A033CBEA3211407F3F5719D84A4640661E65CF642D1140BC6961C0C34A4640D5BB6A5E9C2811403ECF527CEC4A46404EE7A4CDAA2911406BA2C699444B4640481978268B251140B052BF99004C46404C9570A0561A1140099F004B8B4C4640' :: geometry
       , now())
;

/* Observations */
-- SOURCE: https://trac.osgeo.org/postgis/wiki/UserWikiRandomPoint#RandomPointsinPolygon
create or replace function RandomPointsInPolygon(geom geometry, num_points integer)
  returns setof geometry as
$BODY$declare
  target_proportion numeric;

  n_ret             integer := 0;

  loops             integer := 0;

  x_min             float8;

  y_min             float8;

  x_max             float8;

  y_max             float8;

  srid              integer;

  rpoint            geometry;

begin
  -- Get envelope and SRID of source polygon
  select ST_XMin(geom), ST_YMin(geom), ST_XMax(geom), ST_YMax(geom), ST_SRID(geom)
      into x_min, y_min, x_max, y_max, srid
  ;

  -- Get the area proportion of envelope size to determine if a
  -- result can be returned in a reasonable amount of time
  select ST_Area(geom) / ST_Area(ST_Envelope(geom)) into target_proportion
  ;

  raise debug 'geom: SRID %, NumGeometries %, NPoints %, area proportion within envelope %',
  srid, ST_NumGeometries(geom), ST_NPoints(geom),
  round(100.0 * target_proportion, 2) || '%'
  ;

  if target_proportion < 0.0001
  then
    raise exception 'Target area proportion of geometry is too low (%)',
    100.0 * target_proportion || '%'
    ;
  end if
  ;

  raise debug 'bounds: % % % %', x_min, y_min, x_max, y_max
  ;

  while n_ret < num_points loop
    loops := loops + 1
  ;

    select ST_SetSRID(ST_MakePoint(random() * (x_max - x_min) + x_min,
                                   random() * (y_max - y_min) + y_min),
                      srid) into rpoint
  ;

    if ST_Contains(geom, rpoint)
    then
      n_ret := n_ret + 1
      ;

      return next rpoint
      ;
    end if
  ;

  end loop
  ;

  raise debug 'determined in % loops (% efficiency)', loops, round(100.0 * num_points / loops, 2) || '%'
  ;

end$BODY$
language plpgsql
volatile
cost 100
rows 1000
;

-- ALTER FUNCTION RandomPointsInPolygon(geometry, integer) OWNER TO postgres;

truncate table gnc_obstax.t_obstax
restart identity cascade
;

insert into gnc_obstax.t_obstax(uuid_sinp, id_program, cd_nom, date, id_role, count, timestamp_create, geom)

with g as (select row_number()
    over (
      order by random) as id
                , id_program
                , geom
           from (
                select id_program
                     , RandomPointsInPolygon((ST_Dump(ST_SetSRID((st_makevalid(geom)), 4326))).geom,
                                             50) as geom
                     , random() as random
                from gnc_core.t_programs) as t)
    , d as (select row_number()
    over () as id
                 , t.*
            from (
                 select bib_noms.cd_nom
                      , (timestamp '2018-06-01' +
                         random() * (timestamp '2018-12-11 20:00:00' -
                                     timestamp '2018-06-01 10:00:00')) :: date as date
                      , t_users.id_user
                      , floor(random() * 10 + 1) :: int as count
                      , now() as now
                     --         , (
                     --             select RandomPointsInPolygon((ST_Dump(ST_SetSRID((
                     --                                                                select st_union(st_makevalid(geom)) geom
                     --                                                                from gnc_core.t_programs), 4326))).geom, 1)
                     --             limit 1)                                             as geom
                      , random() as random
                 from generate_series(1, 500)
                        cross join taxonomie.bib_noms
                        cross join gnc_core.t_users
                 order by random()
                 limit 500) as t)
select uuid_generate_v4()
     , g.id_program
     , d.cd_nom
     , d.date
     , d.id_user
     , d.count
     , d.now
     , g.geom
from d, g
where d.id = g.id
;
